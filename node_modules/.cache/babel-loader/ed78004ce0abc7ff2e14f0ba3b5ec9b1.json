{"ast":null,"code":"import _regeneratorRuntime from\"/Users/timcher/Documents/GitHub/goit-react-hw-08-phonebook/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/timcher/Documents/GitHub/goit-react-hw-08-phonebook/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from\"axios\";import{setError,resetError}from\"../action/errorAction\";import{loaderOn,loaderOff}from\"../action/loaderAction\";import{resetToken,setToken}from\"../action/tokenAction\";export var registeredOperation=function registeredOperation(userData){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;dispatch(loaderOn());_context.next=4;return axios.post(\"https://goit-phonebook-api.herokuapp.com/users/signup\",userData);case 4:result=_context.sent;console.log(result);dispatch(setToken(result.data.token));_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);dispatch(setError(\"bad request!\"));case 12:_context.prev=12;dispatch(loaderOff());return _context.finish(12);case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,9,12,15]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var loginOperation=function loginOperation(userData){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;dispatch(loaderOn());_context2.next=4;return axios.post(\"https://goit-phonebook-api.herokuapp.com/users/login\",userData);case 4:result=_context2.sent;// console.log(result);\ndispatch(setToken(result.data.token));_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);dispatch(setError(\"bad request!\"));case 11:_context2.prev=11;dispatch(loaderOff());return _context2.finish(11);case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8,11,14]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var logOut=function logOut(token){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var result;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;dispatch(loaderOn());_context3.next=4;return axios({url:\"https://goit-phonebook-api.herokuapp.com/users/logout\",method:\"post\",headers:{Authorization:\"Bearer \".concat(token)}});case 4:result=_context3.sent;dispatch(resetToken());_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);dispatch(setError(_context3.t0));case 11:_context3.prev=11;dispatch(loaderOff());return _context3.finish(11);case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[0,8,11,14]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};axios({url:\"\",method:\"post\",header:{\"Content-type\":\"application/json\"}});","map":{"version":3,"sources":["/Users/timcher/Documents/GitHub/goit-react-hw-08-phonebook/src/redux/operations/authOperations.js"],"names":["axios","setError","resetError","loaderOn","loaderOff","resetToken","setToken","registeredOperation","userData","dispatch","post","result","console","log","data","token","loginOperation","logOut","url","method","headers","Authorization","header"],"mappings":"uRAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,CAAmBC,UAAnB,KAAqC,uBAArC,CACA,OAASC,QAAT,CAAmBC,SAAnB,KAAoC,wBAApC,CACA,OAASC,UAAT,CAAqBC,QAArB,KAAqC,uBAArC,CAEA,MAAO,IAAMC,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACC,QAAD,iGAAc,iBAAOC,QAAP,6IAE7CA,QAAQ,CAACN,QAAQ,EAAT,CAAR,CAF6C,sBAGxBH,CAAAA,KAAK,CAACU,IAAN,CACnB,uDADmB,CAEnBF,QAFmB,CAHwB,QAGvCG,MAHuC,eAO7CC,OAAO,CAACC,GAAR,CAAYF,MAAZ,EACAF,QAAQ,CAACH,QAAQ,CAACK,MAAM,CAACG,IAAP,CAAYC,KAAb,CAAT,CAAR,CAR6C,+EAU7CN,QAAQ,CAACR,QAAQ,CAAC,cAAD,CAAT,CAAR,CAV6C,yBAY7CQ,QAAQ,CAACL,SAAS,EAAV,CAAR,CAZ6C,qGAAd,gEAA5B,CAgBP,MAAO,IAAMY,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACR,QAAD,kGAAc,kBAAOC,QAAP,kJAExCA,QAAQ,CAACN,QAAQ,EAAT,CAAR,CAFwC,uBAGnBH,CAAAA,KAAK,CAACU,IAAN,CACnB,sDADmB,CAEnBF,QAFmB,CAHmB,QAGlCG,MAHkC,gBAOxC;AACAF,QAAQ,CAACH,QAAQ,CAACK,MAAM,CAACG,IAAP,CAAYC,KAAb,CAAT,CAAR,CARwC,mFAUxCN,QAAQ,CAACR,QAAQ,CAAC,cAAD,CAAT,CAAR,CAVwC,0BAYxCQ,QAAQ,CAACL,SAAS,EAAV,CAAR,CAZwC,wGAAd,kEAAvB,CAgBP,MAAO,IAAMa,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACF,KAAD,kGAAW,kBAAON,QAAP,kJAE7BA,QAAQ,CAACN,QAAQ,EAAT,CAAR,CAF6B,uBAGRH,CAAAA,KAAK,CAAC,CACzBkB,GAAG,CAAE,uDADoB,CAEzBC,MAAM,CAAE,MAFiB,CAGzBC,OAAO,CAAE,CAAEC,aAAa,kBAAYN,KAAZ,CAAf,CAHgB,CAAD,CAHG,QAGvBJ,MAHuB,gBAQ7BF,QAAQ,CAACJ,UAAU,EAAX,CAAR,CAR6B,mFAU7BI,QAAQ,CAACR,QAAQ,cAAT,CAAR,CAV6B,0BAY7BQ,QAAQ,CAACL,SAAS,EAAV,CAAR,CAZ6B,wGAAX,kEAAf,CAgBPJ,KAAK,CAAC,CACJkB,GAAG,CAAE,EADD,CAEJC,MAAM,CAAE,MAFJ,CAGJG,MAAM,CAAE,CACN,eAAgB,kBADV,CAHJ,CAAD,CAAL","sourcesContent":["import axios from \"axios\";\nimport { setError, resetError } from \"../action/errorAction\";\nimport { loaderOn, loaderOff } from \"../action/loaderAction\";\nimport { resetToken, setToken } from \"../action/tokenAction\";\n\nexport const registeredOperation = (userData) => async (dispatch) => {\n  try {\n    dispatch(loaderOn());\n    const result = await axios.post(\n      \"https://goit-phonebook-api.herokuapp.com/users/signup\",\n      userData\n    );\n    console.log(result);\n    dispatch(setToken(result.data.token));\n  } catch (error) {\n    dispatch(setError(\"bad request!\"));\n  } finally {\n    dispatch(loaderOff());\n  }\n};\n\nexport const loginOperation = (userData) => async (dispatch) => {\n  try {\n    dispatch(loaderOn());\n    const result = await axios.post(\n      \"https://goit-phonebook-api.herokuapp.com/users/login\",\n      userData\n    );\n    // console.log(result);\n    dispatch(setToken(result.data.token));\n  } catch (error) {\n    dispatch(setError(\"bad request!\"));\n  } finally {\n    dispatch(loaderOff());\n  }\n};\n\nexport const logOut = (token) => async (dispatch) => {\n  try {\n    dispatch(loaderOn());\n    const result = await axios({\n      url: \"https://goit-phonebook-api.herokuapp.com/users/logout\",\n      method: \"post\",\n      headers: { Authorization: `Bearer ${token}` },\n    });\n    dispatch(resetToken());\n  } catch (error) {\n    dispatch(setError(error));\n  } finally {\n    dispatch(loaderOff());\n  }\n};\n\naxios({\n  url: \"\",\n  method: \"post\",\n  header: {\n    \"Content-type\": \"application/json\",\n  },\n});\n"]},"metadata":{},"sourceType":"module"}